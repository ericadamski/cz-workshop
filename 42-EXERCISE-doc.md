Example of a correct output:

```
 1: CONST FS = REQUIRE('FS');
 2:
 3: FUNCTION MAP(F) {
 4:   RETURN INPUTITERABLE =>
 5:     (ASYNC FUNCTION* OUTPUTITERABLE() {
 6:       FOR AWAIT (LET X OF INPUTITERABLE) {
 7:         YIELD F(X);
 8:       }
 9:     })();
10: }
11:
12: FUNCTION SCAN(F, SEED) {
13:   RETURN INPUTITERABLE =>
14:     (ASYNC FUNCTION* OUTPUTITERABLE() {
15:       LET ACC = SEED;
16:       FOR AWAIT (LET X OF INPUTITERABLE) {
17:         ACC = F(ACC, X);
18:         YIELD ACC;
19:       }
20:     })();
21: }
22:
23: FUNCTION PIPE(...CBS) {
24:   LET RES = CBS[0];
25:   FOR (LET I = 1, N = CBS.LENGTH; I < N; I++) RES
26: = CBS[I](RES);
27:   RETURN RES;
28: }
29:
30: ASYNC FUNCTION* CHUNKSTOLINES(CHUNKS) {
31:   LET PREVIOUS = '';
32:   FOR AWAIT (CONST CHUNK OF CHUNKS) {
33:     PREVIOUS += CHUNK;
34:     LET EOLINDEX;
35:     WHILE ((EOLINDEX = PREVIOUS.INDEXOF('\N')) >=
36: 0) {
37:       // LINE INCLUDES THE EOL
38:       CONST LINE = PREVIOUS.SLICE(0, EOLINDEX + 1)
39: ;
40:       YIELD LINE;
41:       PREVIOUS = PREVIOUS.SLICE(EOLINDEX + 1);
42:     }
43:   }
44:   IF (PREVIOUS.LENGTH > 0) {
45:     YIELD PREVIOUS;
46:   }
47: }
48:
49: ASYNC FUNCTION MAIN(INPUTFILEPATH) {
50:   CONST CHUNKS = FS.CREATEREADSTREAM(INPUTFILEPATH
51: , {
52:     ENCODING: 'UTF8',
53:     HIGHWATERMARK: 1024,
54:   });
55:
56:   CONST LINES = PIPE(
57:     CHUNKS,
58:     CHUNKSTOLINES,
59:     // EXERCISE: ADD MORE OPERATIONS HERE
60:   );
61:
62:   FOR AWAIT (CONST LINE OF LINES) {
63:     PROCESS.STDOUT.WRITE(LINE);
64:   }
65: }
66:
67: MAIN('./42-EXERCISE.JS');
```
